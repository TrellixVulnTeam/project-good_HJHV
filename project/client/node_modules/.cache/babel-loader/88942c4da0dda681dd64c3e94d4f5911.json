{"ast":null,"code":"import { useEffect, useState, useCallback } from \"react\";\nimport { isProduction } from \"@rpldy/shared\";\nimport { UPLOAD_OPTIONS_COMP } from \"./consts\";\nimport useUploadyContext from \"./useUploadyContext\";\n\nconst useEventEffect = (event, fn) => {\n  const context = useUploadyContext();\n  const {\n    on,\n    off\n  } = context;\n  useEffect(() => {\n    on(event, fn);\n    return () => {\n      off(event, fn);\n    };\n  }, [event, fn, on, off]);\n};\n\nconst generateUploaderEventHookWithState = (event, stateCalculator) => (fn, id) => {\n  const [eventState, setEventState] = useState(null);\n  const eventCallback = useCallback((eventObj, ...args) => {\n    if (!id || eventObj.id === id) {\n      setEventState(stateCalculator(eventObj, ...args));\n\n      if (fn) {\n        fn(eventObj, ...args);\n      }\n    }\n  }, [fn, id]);\n  useEventEffect(event, eventCallback);\n  return eventState;\n};\n\nconst generateUploaderEventHook = (event, canScope = true) => (fn, id) => {\n  const eventCallback = useCallback((eventObj, ...args) => {\n    return fn && (!canScope || !id || eventObj.id === id) ? fn(eventObj, ...args) : undefined;\n  }, [fn, id]);\n  useEventEffect(event, eventCallback);\n};\n\nconst logWarning = (condition, msg) => {\n  if (!isProduction() && !condition) {\n    // eslint-disable-next-line no-console\n    console.warn(msg);\n  }\n};\n\nconst markAsUploadOptionsComponent = Component => {\n  Component[UPLOAD_OPTIONS_COMP] = true;\n};\n\nconst getIsUploadOptionsComponent = Component => {\n  var _Component$target, _Component$render;\n\n  return Component[UPLOAD_OPTIONS_COMP] === true || ((_Component$target = Component.target) === null || _Component$target === void 0 ? void 0 : _Component$target[UPLOAD_OPTIONS_COMP]) === true || ((_Component$render = Component.render) === null || _Component$render === void 0 ? void 0 : _Component$render[UPLOAD_OPTIONS_COMP]) === true;\n};\n\nexport { generateUploaderEventHook, generateUploaderEventHookWithState, logWarning, markAsUploadOptionsComponent, getIsUploadOptionsComponent };","map":{"version":3,"sources":["D:/project-good/project/client/node_modules/@rpldy/shared-ui/lib/esm/utils.js"],"names":["useEffect","useState","useCallback","isProduction","UPLOAD_OPTIONS_COMP","useUploadyContext","useEventEffect","event","fn","context","on","off","generateUploaderEventHookWithState","stateCalculator","id","eventState","setEventState","eventCallback","eventObj","args","generateUploaderEventHook","canScope","undefined","logWarning","condition","msg","console","warn","markAsUploadOptionsComponent","Component","getIsUploadOptionsComponent","_Component$target","_Component$render","target","render"],"mappings":"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","sourcesContent":["import { useEffect, useState, useCallback } from \"react\";\r\nimport { isProduction } from \"@rpldy/shared\";\r\nimport { UPLOAD_OPTIONS_COMP } from \"./consts\";\r\nimport useUploadyContext from \"./useUploadyContext\";\r\n\r\nconst useEventEffect = (event, fn) => {\r\n  const context = useUploadyContext();\r\n  const {\r\n    on,\r\n    off\r\n  } = context;\r\n  useEffect(() => {\r\n    on(event, fn);\r\n    return () => {\r\n      off(event, fn);\r\n    };\r\n  }, [event, fn, on, off]);\r\n};\r\n\r\nconst generateUploaderEventHookWithState = (event, stateCalculator) => (fn, id) => {\r\n  const [eventState, setEventState] = useState(null);\r\n  const eventCallback = useCallback((eventObj, ...args) => {\r\n    if (!id || eventObj.id === id) {\r\n      setEventState(stateCalculator(eventObj, ...args));\r\n\r\n      if (fn) {\r\n        fn(eventObj, ...args);\r\n      }\r\n    }\r\n  }, [fn, id]);\r\n  useEventEffect(event, eventCallback);\r\n  return eventState;\r\n};\r\n\r\nconst generateUploaderEventHook = (event, canScope = true) => (fn, id) => {\r\n  const eventCallback = useCallback((eventObj, ...args) => {\r\n    return fn && (!canScope || !id || eventObj.id === id) ? fn(eventObj, ...args) : undefined;\r\n  }, [fn, id]);\r\n  useEventEffect(event, eventCallback);\r\n};\r\n\r\nconst logWarning = (condition, msg) => {\r\n  if (!isProduction() && !condition) {\r\n    // eslint-disable-next-line no-console\r\n    console.warn(msg);\r\n  }\r\n};\r\n\r\nconst markAsUploadOptionsComponent = Component => {\r\n  Component[UPLOAD_OPTIONS_COMP] = true;\r\n};\r\n\r\nconst getIsUploadOptionsComponent = Component => {\r\n  var _Component$target, _Component$render;\r\n\r\n  return Component[UPLOAD_OPTIONS_COMP] === true || ((_Component$target = Component.target) === null || _Component$target === void 0 ? void 0 : _Component$target[UPLOAD_OPTIONS_COMP]) === true || ((_Component$render = Component.render) === null || _Component$render === void 0 ? void 0 : _Component$render[UPLOAD_OPTIONS_COMP]) === true;\r\n};\r\n\r\nexport { generateUploaderEventHook, generateUploaderEventHookWithState, logWarning, markAsUploadOptionsComponent, getIsUploadOptionsComponent };"]},"metadata":{},"sourceType":"module"}