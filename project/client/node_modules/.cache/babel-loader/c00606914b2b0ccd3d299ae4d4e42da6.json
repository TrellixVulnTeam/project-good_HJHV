{"ast":null,"code":"import * as actionTypes from '../actionTypes';\nimport axios from 'axios';\nimport { setCurrentUser } from './signUp'; //הוספת מוצר לסל\n\nexport const addProductToCart = (product, count) => {\n  let _id = product._id;\n  let index = localStorage.getItem(\"prodactsInCart\").findIndex(item => item.product._id == _id);\n  if (index == -1) localStorage.getItem(\"prodactsInCart\").push({\n    cnt: count,\n    product: _id\n  });else localStorage.getItem(\"prodactsInCart\")[index].cnt += count;\n  return {\n    type: actionTypes.ADD_PRODUCT_TO_CART,\n    payload: {\n      cnt: count,\n      product: product\n    }\n  };\n}; //מחיקת מוצר מסל\n\nexport const deleteProductFromCart = _id => {\n  let arr = localStorage.getItem(\"prodactsInCart\").filter(p => p.product._id !== _id);\n  localStorage.setItem(\"prodactsInCart\", arr);\n  return {\n    type: actionTypes.DELETE_PRODUCT_FROM_CART,\n    payload: _id\n  };\n};\nexport const setCnt = (_id, cnt) => {\n  let index = localStorage.getItem(\"prodactsInCart\").findIndex(item => item.product._id == _id);\n  let arr = [...localStorage.getItem(\"prodactsInCart\")];\n  if (index != -1) arr[index].cnt = cnt;\n  return {\n    type: actionTypes.SET_CNT_PRODUCT_IN_CART,\n    payload: {\n      _id: _id,\n      cnt: cnt\n    }\n  };\n};\nexport const updateCurrentUser = user => {\n  return {\n    type: actionTypes.UPDATE_CURRENT_USER,\n    payload: user\n  };\n};\nexport const updateUser = user => {\n  console.log(user);\n  return dispatch => {\n    axios.put(`http://localhost:5000/users/${user._id}`, user).then(succ => {\n      console.log(user);\n      console.log(succ.data);\n\n      if (succ.status != 400) {\n        // dispatch(updateCurrentUser(succ.data));\n        dispatch(dispatch(setCurrentUser(succ.data), localStorage.setItem('currentUser', succ.data)));\n      }\n    });\n  };\n}; //מראה את הטבלה ההזמנות של משתמש קיים \n//של משתמש קיים ומחזירה את ההזמנות של אותו משתמש _id מקבלת  \n\nexport const getOrdersList = user => {\n  let id = user._id;\n  return dispatch => {\n    axios.get(`http://localhost:5000/orders/orderList/${id}`).then(succ => {\n      if (succ.status != 400) return succ.data;\n    });\n  };\n}; //בלחיצה על כפתור הצג הזמנה \n//של הזמנה ומחזירה את ההזמנה_id מקבלת \n\nexport const getOrderById = order => {\n  let id = order._id;\n  return dispatch => {\n    axios.get(`http://localhost:5000/orders/${id}`).then(succ => {\n      if (succ.status != 400) return succ.data;\n    });\n  };\n};\nexport const signOut = () => {\n  localStorage.clear();\n  return {\n    type: actionTypes.SIGN_OUT\n  };\n};","map":{"version":3,"sources":["D:/project-good/project/client/src/store/actions/user.js"],"names":["actionTypes","axios","setCurrentUser","addProductToCart","product","count","_id","index","localStorage","getItem","findIndex","item","push","cnt","type","ADD_PRODUCT_TO_CART","payload","deleteProductFromCart","arr","filter","p","setItem","DELETE_PRODUCT_FROM_CART","setCnt","SET_CNT_PRODUCT_IN_CART","updateCurrentUser","user","UPDATE_CURRENT_USER","updateUser","console","log","dispatch","put","then","succ","data","status","getOrdersList","id","get","getOrderById","order","signOut","clear","SIGN_OUT"],"mappings":"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","sourcesContent":["import * as actionTypes from '../actionTypes';\r\nimport axios from 'axios';\r\nimport { setCurrentUser } from './signUp'\r\n\r\n//הוספת מוצר לסל\r\nexport const addProductToCart = (product, count) => {\r\n\r\n    let _id = product._id;\r\n\r\n    let index = localStorage.getItem(\"prodactsInCart\").findIndex(item => item.product._id == _id);\r\n    if (index == -1) localStorage.getItem(\"prodactsInCart\").push({ cnt: count, product: _id });\r\n    else localStorage.getItem(\"prodactsInCart\")[index].cnt += count;\r\n\r\n    return {\r\n        type: actionTypes.ADD_PRODUCT_TO_CART,\r\n        payload: { cnt: count, product: product }\r\n    }\r\n}\r\n//מחיקת מוצר מסל\r\nexport const deleteProductFromCart = (_id) => {\r\n\r\n    let arr = localStorage.getItem(\"prodactsInCart\").filter(p => p.product._id !== _id);\r\n    localStorage.setItem(\"prodactsInCart\", arr);\r\n    return {\r\n        type: actionTypes.DELETE_PRODUCT_FROM_CART,\r\n        payload: _id\r\n    }\r\n}\r\n\r\nexport const setCnt = (_id, cnt) => {\r\n\r\n    let index = localStorage.getItem(\"prodactsInCart\").findIndex(item => item.product._id == _id);\r\n    let arr = [...localStorage.getItem(\"prodactsInCart\")];\r\n    if (index != -1) arr[index].cnt = cnt;\r\n\r\n    return {\r\n        type: actionTypes.SET_CNT_PRODUCT_IN_CART,\r\n        payload: { _id: _id, cnt: cnt }\r\n    }\r\n}\r\n\r\nexport const updateCurrentUser = (user) => {\r\n    return {\r\n        type: actionTypes.UPDATE_CURRENT_USER,\r\n        payload: user\r\n    }\r\n}\r\n\r\nexport const updateUser = (user) => {\r\n    console.log(user);\r\n\r\n    return (dispatch) => {\r\n        axios.put(`http://localhost:5000/users/${user._id}`, user).then(succ => {\r\n            console.log(user);\r\n            console.log(succ.data);\r\n            if (succ.status != 400) {\r\n                // dispatch(updateCurrentUser(succ.data));\r\n                dispatch(dispatch(setCurrentUser(succ.data), localStorage.setItem('currentUser', succ.data)));\r\n            }\r\n\r\n        })\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n//מראה את הטבלה ההזמנות של משתמש קיים \r\n//של משתמש קיים ומחזירה את ההזמנות של אותו משתמש _id מקבלת  \r\nexport const getOrdersList = (user) => {\r\n    let id = user._id;\r\n    return (dispatch) => {\r\n        axios.get(`http://localhost:5000/orders/orderList/${id}`).then(succ => {\r\n            if (succ.status != 400)\r\n                return succ.data;\r\n        })\r\n    }\r\n}\r\n//בלחיצה על כפתור הצג הזמנה \r\n//של הזמנה ומחזירה את ההזמנה_id מקבלת \r\nexport const getOrderById = (order) => {\r\n    let id = order._id;\r\n    return (dispatch) => {\r\n        axios.get(`http://localhost:5000/orders/${id}`).then(succ => {\r\n            if (succ.status != 400)\r\n                return succ.data;\r\n        })\r\n    }\r\n}\r\n\r\nexport const signOut = () => {\r\n    localStorage.clear();\r\n    return {\r\n        type: actionTypes.SIGN_OUT\r\n    }\r\n}\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}